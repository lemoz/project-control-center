FROM node:20-slim

RUN apt-get update \
  && apt-get install -y --no-install-recommends \
    git \
    curl \
    ca-certificates \
  && rm -rf /var/lib/apt/lists/*

RUN npm install -g @openai/codex

# Note: Codex authentication is provided by mounting ~/.codex from the VM host
# which contains auth.json from 'codex login'. See vm_manager.ts syncCodexAuth().

WORKDIR /workspace

CMD ["bash"]
